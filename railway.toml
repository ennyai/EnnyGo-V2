[build]
builder = "nixpacks"
buildCommand = "npm install && npm run build"

[deploy]
startCommand = "npm start"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "always"
healthcheckInterval = 30

[nixpacks]
node_version = "18.x"
install_cmd = "npm install"
plan = [
    { name = "install", command = "npm install --legacy-peer-deps" },
    { name = "build", command = "ROLLUP_SKIP_LOAD_NATIVE_PLUGIN=true npm run build" },
    { name = "start", command = "npm start" }
] 